package com.devsenior.jaldana;

import com.devsenior.jaldana.exception.CursoLlenoException;
import com.devsenior.jaldana.model.Curso;
import com.devsenior.jaldana.model.Estudiante;
import com.devsenior.jaldana.model.Inscripcion;
import com.devsenior.jaldana.service.CursoService;
import com.devsenior.jaldana.service.InscripcionService;

public class Main {
    public static void main(String[] args) {
    
        CursoService cursoService = new CursoService();
        InscripcionService inscripcionService = new InscripcionService();

        //crear cursos
        Curso javaBasico = new Curso("C001", "Java Básico", 2);
        Curso pythonIntermedio = new Curso("C002", "Python Intermedio", 4);
        
        cursoService.agregarCurso(javaBasico);
        cursoService.agregarCurso(pythonIntermedio);

        //Crear estudinates
        Estudiante estudiante1 = new Estudiante("E001", "Ana Pérez","nana@gmail.com");
        Estudiante estudiante2 = new Estudiante("E002", "Luis Gómez","luis@gmail.com");
        Estudiante estudiante3 = new Estudiante("E003", "Marta Ruiz","marta@gmail.com");

        //Inscripciones con manejo de excepciones
        try {
            inscripcionService.inscribirEstudiante(javaBasico, estudiante1);
            inscripcionService.inscribirEstudiante(javaBasico, estudiante2);
            inscripcionService.inscribirEstudiante(pythonIntermedio, estudiante3);
            inscripcionService.inscribirEstudiante(javaBasico, estudiante3); //deberia fallar por cupo lleno
        } catch (CursoLlenoException e) {
            logger.error("Error de inscripción: " + e.getMessage());
        }
        
        //Mostrar cursos y estudiantes inscritos
        System.out.println("---cursos disponibles---");
        for (Curso curso : cursoService.listarCursos()) {
            System.out.println(curso);
            System.out.println("Estudiantes inscritos:");
            for (Estudiante est : curso.getEstudiantesInscritos()) {
                System.out.println("- " + est);
            }
        }
    }
}
package com.devsenior.jaldana.exception;

public class CursoLlenoException extends Exception {
    public CursoLlenoException(String mensaje) {
        super(mensaje);
    }
public CursoLlenoException (String mensaje, Throwable cause) {
        super(mensaje, cause);
    }
}
package com.devsenior.jaldana.exception;

public class CursoNoencotradoException extends Exception{
    public CursoNoencotradoException(String mensaje) {
        super(mensaje);
    }

}
package com.devsenior.jaldana.exception;

public class EstudianteNoEncontadoException extends Exception {
    public EstudianteNoEncontadoException(String message) {
        super(message);
    }
public EstudianteNoEncontadoException(String message, Throwable cause) {
        super(message, cause);
    }
}
package com.devsenior.jaldana.model;

import java.util.List;

public class Curso {
    //atributos: codigo, nombre, capacidad, estudiantes inscritos
    private String codigo;
    private String nombre;
    private int capacidad;
    private List<Estudiante> estudiantesInscritos; 

    public Curso(String codigo, String nombre, int capacidad) {
        this.codigo = codigo;
        this.nombre = nombre;
        this.capacidad = capacidad;
    }

    public String getCodigo() {
        return codigo;
    }

    public void setCodigo(String codigo) {
        this.codigo = codigo;
    }

    public String getNombre() {
        return nombre;
    }

    public void setNombre(String nombre) {
        this.nombre = nombre;
    }

    public int getCapacidad() {
        return capacidad;
    }

    public void setCapacidad(int capacidad) {
        this.capacidad = capacidad;
    }

    public List<Estudiante> getEstudiantesInscritos() {
        return estudiantesInscritos;
    }

    public void setEstudiantesInscritos(List<Estudiante> estudiantesInscritos) {
        this.estudiantesInscritos = estudiantesInscritos;
    }

    public boolean estaLleno() {
        return estudiantesInscritos.size() >= capacidad;
    }

    public void agregarEstudiante(Estudiante estudiante) {
        if (!estaLleno()) {
            estudiantesInscritos.add(estudiante);
        }
    }
    @Override
    public String toString() {
        return "Curso{" + "Codigo= '" + codigo + '\'' + ", Nombre= '" + nombre + '\'' + ", Capacidad= " + capacidad + ", estudiantes Inscritos= " + estudiantesInscritos + '}';
    }
    
}
package com.devsenior.jaldana.model;

import java.util.List;

public class Estudiante {
    private String id;
    private String nombre;
    private String email;
    private List <Curso> cursosInscritos;

    public Estudiante (String id, String nombre, String email) {
        this.id = id;
        this.nombre = nombre;
        this.email = email;
    }

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getNombre() {
        return nombre;
    }

    public void setNombre(String nombre) {
        this.nombre = nombre;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public List<Curso> getCursosInscritos() {
        return cursosInscritos;
    }

    public void setCursosInscritos(List<Curso> cursosInscritos) {
        this.cursosInscritos = cursosInscritos;
    }
    

   



}
package com.devsenior.jaldana.model;

import java.time.LocalDate;

public class Inscripcion {
//Estudiante, curso, fecha de inscripcion
    private Estudiante estudiante;
    private Curso curso;
    private LocalDate fechaInscripcion;

    public Inscripcion (Estudiante estudiante, Curso curso) {
        this.estudiante = estudiante;
        this.curso = curso;
        this.fechaInscripcion = LocalDate.now();
    }

    public Estudiante getEstudiante() {
        return estudiante;
    }

    public void setEstudiante(Estudiante estudiante) {
        this.estudiante = estudiante;
    }

    public Curso getCurso() {
        return curso;
    }

    public void setCurso(Curso curso) {
        this.curso = curso;
    }

    public LocalDate getFechaInscripcion() {
        return fechaInscripcion;
    }

    public void setFechaInscripcion(LocalDate fechaInscripcion) {
        this.fechaInscripcion = fechaInscripcion;
    }
    @Override
    public String toString() {
        return "Inscripcion{" + "estudiante=" + estudiante + ", curso=" + curso + ", fechaInscripcion=" + fechaInscripcion +'}';
    }
    
}
package com.devsenior.jaldana.service;

import java.util.ArrayList;
import java.util.List;
import org.apache.logging.log4j.*;

import com.devsenior.jaldana.exception.CursoNoencotradoException;
import com.devsenior.jaldana.model.Curso;


public class CursoService {
    private static final Logger logger = LogManager.getLogger(CursoService.class);
    private List<Curso> cursos;

    public CursoService() {
        this.cursos = new ArrayList<>(); //se inicializa con new arraylist
    }
    //agrgar curso
    public void agregarCurso(Curso curso) {
        cursos.add(curso);
        logger.info("Curso agregado: " + curso.getNombre());
    }
    //listar cursos
    public List<Curso> listarCursos() {
        return cursos;
    }
    //Buscar curso por codigo
    public Curso buscarCursoPorCodigo(String codigo) throws CursoNoencotradoException {//este es el codigo que el for va a iterar en la lista cursos
        for (Curso curso : cursos) {
            if (curso.getCodigo().equals(codigo)) { //itea la lista de cursos hasta encontrar el codigo que se pidio
                return curso;
            }
        }
        logger.warn("Curso no encontrado con codigo: " + codigo);
        throw new CursoNoencotradoException("Curso con el codigo: " + "'"+ codigo+ "'" + " no encontrado."  );
    }
}
package com.devsenior.jaldana.service;

import java.util.ArrayList;
import java.util.List;

import org.apache.logging.log4j.*;

import com.devsenior.jaldana.exception.CursoLlenoException;
import com.devsenior.jaldana.exception.EstudianteNoEncontadoException;
import com.devsenior.jaldana.model.Curso;
import com.devsenior.jaldana.model.Estudiante;
import com.devsenior.jaldana.model.Inscripcion;

public class InscripcionService {
   
   private static final Logger logger = LogManager.getLogger(InscripcionService.class);
   
    //coleccion de inscripciones

private List<Inscripcion> inscripciones;

   public InscripcionService() {
       this.inscripciones = new ArrayList<>();
    }

    public void inscribirEstudiante(Curso curso, Estudiante estudiante) throws CursoLlenoException {
       if (curso.estaLleno()) {
        logger.error("Intento de inscripcion fallido: curso lleno {} en el curso {}: cupo lleno.", curso.getNombre());
        throw new CursoLlenoException("El curso " + curso.getNombre() + "esta lleno. Nse puede inscribir al curso");
       }
       curso.agregarEstudiante(estudiante);
       Inscripcion inscripcion = new Inscripcion (estudiante, curso);
       inscripciones.add(inscripcion);
       logger.info("Estudiante {} inscrito exitosamente en el curso {}.", estudiante.getNombre(), curso.getNombre());
    }

    public List<Inscripcion> buscarInscripcionesPorEstudiante(Estudiante estudiante) throws EstudianteNoEncontadoException {
        
        //creamos una lista para guardar las inscripciones del estudiante
        List<Inscripcion> inscripcionesDelEstudiante = new ArrayList<>();

        for (Inscripcion inscripcion : inscripciones) {
            if (inscripcion.getEstudiante().getId().equals(estudiante.getId())) {
                inscripcionesDelEstudiante.add(inscripcion);
            }
        }

        //si no encontramos inscripciones, registramos un aviso en el log
        if (inscripcionesDelEstudiante.isEmpty()) {
            logger.warn("No se encontraron inscripciones para el estudiante {}.", estudiante.getId());
            throw new EstudianteNoEncontadoException("No se encontraron inscripciones para el estudiante: " + estudiante.getNombre() +"con el ID: "+ estudiante.getId());
        } else {
            logger.info("Se encontraron {} inscripciones para el estudiante {}.", inscripcionesDelEstudiante.size(), estudiante.getNombre());
        }

        return inscripcionesDelEstudiante;

    }
}
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.devsenior.jaldana</groupId>
    <artifactId>plataforma_cursos_en_linea</artifactId>
    <version>1.0-SNAPSHOT</version>

    <properties>
        <maven.compiler.source>17</maven.compiler.source>
        <maven.compiler.target>17</maven.compiler.target>
    </properties>
    <dependencies>
        <dependency>
            <groupId>org.apache.logging.log4j</groupId>
            <artifactId>log4j-api</artifactId>
            <version>2.20.0</version>
        </dependency>
        <dependency>
            <groupId>org.junit.jupite</groupId>
            <artifactId>junit-jupiter-engine</artifactId>
            <version>5.11.3</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

</project>
